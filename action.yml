name: 'Build Mongoose OS firmware - Shelly edition'
description: 'Builds a Mongoose OS firmware for given target'
author: 'dea82, yaourdt'
inputs:
  mos-yml-path:
    description: 'Path to mos.yml file'
    required: true
    default: '.'
  platform:
    description: 'The platform to build firmware for'
    required: true
    default: 'esp8266'
  build-var:
    description: 'Further build variables (eg. Shelly model)'
    required: true
    default: 'MODEL=Shelly1'
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - '--mos-yml-path'
    - ${{ inputs.mos-yml-path }}
    - 'build'
    - '--verbose'
    - '--platform'
    - ${{ inputs.platform }}
    - '--build-var'
    - ${{ inputs.build-var }}
branding:
  icon: 'cpu'
  color: 'blue'
